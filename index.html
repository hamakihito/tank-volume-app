<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <title>タンク容量計算</title>
    <style>
        body {
            font-family: sans-serif;
            padding: 2em;
            max-width: 500px;
            margin: auto;
        }

        label,
        input,
        select,
        button {
            font-size: 1.2em;
            margin-top: 1em;
            display: block;
            width: 100%;
        }

        #result {
            margin-top: 1.5em;
            font-weight: bold;
            font-size: 1.5em;
        }
    </style>
</head>

<body>
    <h2>タンク容量計算</h2>

    <label for="tankInput">タンク番号（現在T1のみ）：</label>
    <input list="tankList" id="tankInput" value="T1">
    <datalist id="tankList">
        <option value="T1">
    </datalist>

    <label for="depthInput">深さ（cm）：</label>
    <input type="number" id="depthInput" step="0.1">

    <button onclick="calculateVolume()">容量を計算する</button>

    <div id="result">容量: ---</div>

    <script>
        // T1のデータを配列で保持
        const tankTables = {
            T1: [
                { depth: 0, volume: 1184 },
                { depth: 2, volume: 1181 },
                { depth: 4, volume: 1179 },
                { depth: 6, volume: 1177 },
                { depth: 8, volume: 1175 },
                { depth: 10, volume: 1173 },
                { depth: 12, volume: 1171 },
                { depth: 14, volume: 1169 },
                { depth: 16, volume: 1167 },
                { depth: 18, volume: 1165 },
                { depth: 20, volume: 1163 },
                { depth: 22, volume: 1161 },
                { depth: 24, volume: 1159 },
                { depth: 26, volume: 1157 },
                { depth: 28, volume: 1155 },
                { depth: 30, volume: 1153 },
                { depth: 32, volume: 1150 },
                { depth: 34, volume: 1148 },
                { depth: 36, volume: 1146 },
                { depth: 38, volume: 1144 },
                { depth: 40, volume: 1142 },
                { depth: 42, volume: 1140 },
                { depth: 44, volume: 1138 },
                { depth: 46, volume: 1136 },
                { depth: 48, volume: 1134 },
                { depth: 50, volume: 1132 },
                { depth: 52, volume: 1130 },
                { depth: 54, volume: 1128 },
                { depth: 56, volume: 1126 },
                { depth: 58, volume: 1124 },
                { depth: 60, volume: 1121 },
                { depth: 62, volume: 1119 },
                { depth: 64, volume: 1117 },
                { depth: 66, volume: 1115 },
                { depth: 68, volume: 1113 },
                { depth: 70, volume: 1111 },
                { depth: 72, volume: 1109 },
                { depth: 74, volume: 1107 },
                { depth: 76, volume: 1105 },
                { depth: 78, volume: 1103 },
                { depth: 80, volume: 1101 },
                { depth: 82, volume: 1099 },
                { depth: 84, volume: 1097 },
                { depth: 86, volume: 1095 },
                { depth: 88, volume: 1093 },
                { depth: 90, volume: 1090 },
                { depth: 92, volume: 1088 },
                { depth: 94, volume: 1086 },
                { depth: 96, volume: 1084 },
                { depth: 98, volume: 1082 },
                { depth: 100, volume: 1080 },
                { depth: 102, volume: 1078 },
                { depth: 104, volume: 1076 },
                { depth: 106, volume: 1074 },
                { depth: 108, volume: 1072 },
                { depth: 110, volume: 1070 },
                { depth: 112, volume: 1068 },
                { depth: 114, volume: 1066 },
                { depth: 116, volume: 1064 },
                { depth: 118, volume: 1061 },
                { depth: 120, volume: 1059 },
                { depth: 122, volume: 1057 },
                { depth: 124, volume: 1055 },
                { depth: 126, volume: 1053 },
                { depth: 128, volume: 1051 },
                { depth: 130, volume: 1049 },
                { depth: 132, volume: 1047 },
                { depth: 134, volume: 1045 },
                { depth: 136, volume: 1043 },
                { depth: 138, volume: 1041 },
                { depth: 140, volume: 1039 },
                { depth: 142, volume: 1037 },
                { depth: 144, volume: 1035 },
                { depth: 146, volume: 1033 },
                { depth: 148, volume: 1030 },
                { depth: 150, volume: 1028 },
                { depth: 152, volume: 1026 },
                { depth: 154, volume: 1024 },
                { depth: 156, volume: 1022 },
                { depth: 158, volume: 1020 },
                { depth: 160, volume: 1018 },
                { depth: 162, volume: 1016 },
                { depth: 164, volume: 1014 },
                { depth: 166, volume: 1012 },
                { depth: 168, volume: 1010 },
                { depth: 170, volume: 1008 },
                { depth: 172, volume: 1006 },
                { depth: 174, volume: 1004 },
                { depth: 176, volume: 1001 },
                { depth: 178, volume: 999 },
                { depth: 180, volume: 997 },
                { depth: 182, volume: 995 },
                { depth: 1096, volume: 50 },
                { depth: 1098, volume: 48 },
            ]
        };

        function calculateVolume() {
            const tankId = document.getElementById("tankInput").value;
            const depth = parseFloat(document.getElementById("depthInput").value);
            const result = document.getElementById("result");

            if (!tankTables[tankId]) {
                result.innerText = `エラー：タンク「${tankId}」はデータがありません`;
                return;
            }

            if (isNaN(depth)) {
                result.innerText = "深さを入力してください";
                return;
            }

            const table = tankTables[tankId];

            // 範囲外チェック
            if (depth < table[0].depth || depth > table[table.length - 1].depth) {
                result.innerText = "対応外の深さです";
                return;
            }

            // 完全一致
            const exact = table.find(d => d.depth === depth);
            if (exact) {
                result.innerText = `容量: ${exact.volume} L`;
                return;
            }

            // 線形補間
            for (let i = 0; i < table.length - 1; i++) {
                const d1 = table[i];
                const d2 = table[i + 1];

                if (depth > d1.depth && depth < d2.depth) {
                    const ratio = (depth - d1.depth) / (d2.depth - d1.depth);
                    const vol = d1.volume + ratio * (d2.volume - d1.volume);
                    result.innerText = `容量: ${vol.toFixed(2)} L`;
                    return;
                }
            }

            result.innerText = "計算できませんでした";
        }
    </script>
</body>

</html>